## 产生并发问题的原因
### 前置说明
    因为CPU与内存的速度差异很大，为了合理利用CPU的高性能,平衡CPU和内存的速度差异，计算机体系、操作系统、编译程序做出如下优化：
    1. CPU增加缓存，以均衡和内存的速度差异；
    2. 操作系统增加了进程、线程，以分时复用CPU,进而均衡CPU与内存、I/O设备的速度差异
    3. 编译程序优化指令执行次序, 使得缓存能够得到更加合理的利用

### 一. 缓存导致的可见性问题
   可见性，一个线程对共享变量的修改，另外一个线程可以立刻看到，称为可见性。
   可见性问题主要出现于多核时代.多核时代，每个cpu都有自己的缓存，当多个线程在不同的cpu上执行时，这些线程操作的是不同的cpu缓存。
   

### 二.线程切换带来的原子性问题
    操作系统执行任务切换，可以发生在任何一条cpu指令执行完成后，而不是高级语言的一条语句。
    cpu能保证的原子操作是cpu指令级别的

### 三.编译优化带来的有序性问题
    编译器为了优化性能，有时会改变程序中语句的顺序，但不影响程序结果